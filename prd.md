# 제품 요구사항 정의서 (PRD) - '모두의 선택' (코드 기반)

## 1. 개요

이 문서는 현재 코드베이스에 구현된 '모두의 선택' 실시간 투표 플랫폼의 기능과 흐름을 설명합니다. Vite, React, TypeScript, Supabase, Tailwind CSS 스택을 기반으로 구축되었습니다.

---

## 2. 핵심 기능 흐름

### 2.1. 애플리케이션 진입 및 라우팅

1.  **진입점**: 사용자는 `index.html`을 통해 애플리케이션에 접근합니다. `src/main.tsx` 파일이 앱의 최상위 컴포넌트(`src/App.tsx`)를 DOM에 렌더링합니다.
2.  **전역 설정**: `src/App.tsx`는 애플리케이션의 최상위 레벨에서 다음과 같은 설정을 담당합니다.
    *   `MainProviders`를 통해 `react-query`(서버 데이터 관리), `Tooltip` 등 전역 프로바이더를 제공합니다.
    *   `react-router-dom`을 사용하여 클라이언트 사이드 라우팅을 설정합니다.
3.  **경로 (Routes)**:
    *   `GET /`: **메인 페이지** (`HomePage`)로 연결됩니다.
    *   `GET /create`: **투표 생성 페이지** (`CreatePage`)로 연결됩니다.
    *   그 외 모든 경로는 **404 Not Found** 페이지를 표시합니다.

### 2.2. 기능 상세

#### 가. 투표 목록 조회 (메인 페이지)

-   **담당 컴포넌트**: `src/pages/HomePage.tsx`
-   **UI 구조**:
    -   **헤더**: '모두의 선택' 로고, 투표 검색창, 관리자 메뉴로 접근하는 설정 아이콘이 포함되어 있습니다.
    -   **본문**: '진행 중인 투표'와 '종료된 투표' 두 섹션으로 나뉩니다.
    -   **데이터 소스**: 현재는 실제 데이터베이스 연동이 아닌, 컴포넌트 내부에 하드코딩된 **목업 데이터(`mockVotes`)**를 사용하여 투표 목록을 화면에 표시합니다.
    -   **항목 표시**: 각 투표는 `VoteCard` 컴포넌트를 통해 표시됩니다. (현재 `VoteCard`는 제목 등 기본 정보만 표시하는 뼈대(skeleton) 상태입니다.)
-   **상호작용**:
    -   화면 우측 하단에 떠 있는 '+' 버튼(FAB)을 클릭하면 투표 생성 페이지(`/create`)로 이동합니다.

#### 나. 투표 생성

-   **담당 컴포넌트**: `src/pages/CreatePage.tsx` > `src/components/CreatePollForm.tsx`
-   **입력 필드**:
    -   **투표 제목**: 텍스트 입력 (필수)
    -   **상세 설명**: 여러 줄 텍스트 입력 (선택)
    -   **선택지**: 최소 2개, 최대 3개의 선택지를 동적으로 추가/삭제/수정 (필수)
    -   **투표 기간**: '10분', '1시간' 등 빠른 선택 또는 날짜/시간 직접 입력을 통해 설정 (필수)
-   **데이터 처리 흐름**:
    1.  사용자가 모든 필수 필드를 입력하고 '투표 만들기' 버튼을 클릭합니다.
    2.  `CreatePollForm` 컴포넌트는 `react-query`의 `useMutation` 훅을 사용하여 데이터 제출을 처리합니다.
    3.  입력된 정보는 `addPoll` 함수를 통해 Supabase 데이터베이스의 `votes` 테이블에 새로운 레코드로 **삽입(insert)**됩니다.
    4.  생성이 성공하면, `react-query`는 투표 목록 데이터(`votes` 쿼리)를 무효화하여 최신 상태로 갱신하도록 요청합니다.
    5.  사용자는 자동으로 메인 페이지(`/`)로 이동합니다.

---

## 3. 미구현 및 플레이스홀더 기능

현재 코드에는 UI만 존재하거나, 기능이 연결되지 않은 미구현 요소들이 다수 존재합니다.

-   **데이터 연동**: 메인 페이지의 투표 목록이 목업 데이터를 사용하고 있어, 실제 데이터베이스와 연동이 필요합니다. (`MainPollList`의 `react-query` 연동 필요)
-   **투표 기능**: 사용자가 특정 선택지에 투표하는 기능이 미구현 상태입니다.
-   **실시간 그래프**: 투표 결과를 보여주는 '영역 점유형 그래프' UI가 `VoteCard` 내에 구현되어야 합니다.
-   **헤더 기능**: 검색 기능과 관리자 메뉴(숨긴 투표, 신고 내역 조회 등)의 실제 로직이 구현되지 않았습니다.
